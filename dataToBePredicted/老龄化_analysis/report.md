# 老龄化人口 3 年预测报告（基于 ARIMAX）

生成时间：请参见 `forecast_arimax.py` 的运行输出。

概述
- 使用数据：2019–2023 年中国 65 岁以上老年人口（单位：万人）与全国总人口（单位：万人）。
- 外生变量：年度出生率（‰）与单身人口比例（%），均来自同一 MD 文件中的表格。
- 目标：对未来 3 年（2024–2026）进行预测，并尽可能采用策略缩小预测置信区间（CI）。

主要策略
- 引入外生变量（出生率、单身比例）：减少对内生序列单一自回归结构的依赖，从而降低预测不确定性。
- 在两种尺度上建模并对比：
  1. 百分比尺度（elderly_pct）：直接对比例建模；
  2. 对数人口尺度（log(elderly_count)）：对数变换可以稳定方差，反变换后得到非对称 CI，常常更稳健。
- 对外生变量做简单线性外推以减少对未来外生信息的不确定性（更复杂的外生预测可替换此步骤以进一步收窄 CI）。
- 在小范围内进行网格搜索（p=0..2, d=0..1, q=0..2）并以 AIC 选择最优模型。

输出文件（位于本文件夹）
- `predictions_3y.csv`：含 2024-2026 年的预测值与 95% CI（既有比例尺度也有人口数尺度）。
- `forecast_prop.png`：在比例尺度上的观测与预测图（含 95% CI）。
- `forecast_count.png`：在人口数尺度上的观测与预测图（含 95% CI，反变换后）。
- `fit_summary_prop.txt` / `fit_summary_log_count.txt`：两种尺度下的拟合摘要（由 statsmodels 输出）。
- `decision.txt`：脚本比较两种尺度的 CI 宽度并写明选择（`prop` 或 `log_count`）。

如何运行
1. 在工作区根目录下运行（建议虚拟环境并已安装 `requirements.txt` 中列出的依赖）：

```
py -3 dataToBePredicted/老龄化_analysis/forecast_arimax.py
```

2. 结果会保存在 `dataToBePredicted/老龄化_analysis/` 下。

结果解读（快速指南）
- 打开 `predictions_3y.csv` 查看按年列出的预测中位数与上下 95% CI。
- 若 `decision.txt` 中显示 `chosen=prop`，说明在给定外生变量外推和网格范围内，比例尺度模型的平均 CI 更窄；反之若为 `log_count`，则对数尺度模型更佳。
- 查看 `fit_summary_*.txt` 来核查参数显著性、残差自相关及信息准则等诊断信息。

后续可改进之处（若需进一步收窄 CI）
- 改进外生变量预测：对出生率和单身率建立独立模型（例如小样本的线性/ARIMA 模型或使用更丰富的社会经济预测），以降低 exog 预测误差。
- 使用更长的历史序列（若能获取到更早年份数据）会显著降低预测不确定性并让模型能识别更清晰的动态。
- 若可获得区域/分组数据，可构建层级模型或合并多个信息源以减少总体不确定性。
- 可以用参数不确定性采样（bootstrap 或后验采样）对预测区间做更稳健的估计——脚本当前使用 statsmodels 内置的预测区间。

附：如果你希望，我可以：
- 运行当前脚本并上传生成的图表/CSV（我可以在本环境执行并把结果列出）。
- 将外生变量的外推替换为单独的 ARIMA/线性模型以改进 exog 预测。

报告结束。
